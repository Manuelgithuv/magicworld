<div class="reset-password-background">
  <form [formGroup]="resetForm" (ngSubmit)="onSubmit()" class="reset-password-form">
    <div class="reset-password-title">{{ 'resetPassword.title' | translate }}</div>

    <label for="password" class="reset-password-label">{{ 'resetPassword.newPassword' | translate }}</label>
    <input id="password" type="password" formControlName="password" class="reset-password-input" [class.invalid]="submitted && password?.invalid" />
    @if (submitted && password?.errors) {
      @if ((password?.errors ?? {})['required']) {
        <div class="reset-password-error">{{ 'validation.password.required' | translate }}</div>
      }
      @if ((password?.errors ?? {})['minlength']) {
        <div class="reset-password-error">{{ 'validation.password.size' | translate:{min:8} }}</div>
      }
    }

    <label for="confirmPassword" class="reset-password-label">{{ 'resetPassword.confirmPassword' | translate }}</label>
    <input id="confirmPassword" type="password" formControlName="confirmPassword" class="reset-password-input" [class.invalid]="submitted && confirmPassword?.invalid" />
    @if (submitted && confirmPassword?.errors) {
      @if ((confirmPassword?.errors ?? {})['required']) {
        <div class="reset-password-error">{{ 'validation.password.required' | translate }}</div>
      }
    }
    @if (submitted && resetForm.errors?.['mismatch']) {
      <div class="reset-password-error">{{ 'validation.password.mismatch' | translate }}</div>
    }

    <button type="submit" class="reset-password-button">{{ 'resetPassword.submit' | translate }}</button>

    @if (successMessage) {
      <div class="reset-password-success">{{ successMessage }}</div>
    }
    @if (errorMessages.length > 0) {
      <div class="reset-password-error">
        @for (msg of errorMessages; track $index) {
          {{ msg }}<br />
        }
      </div>
    }
    @else if (errorCode) {
      <div class="reset-password-error">{{ errorCode | translate:errorArgs }}</div>
    }
  </form>
</div>
